{"componentChunkName":"component---src-pages-index-tsx","path":"/","result":{"data":{"header":{"childImageSharp":{"fixed":{"base64":"data:image/jpeg;base64,/9j/2wBDAAgGBgcGBQgHBwcJCQgKDBQNDAsLDBkSEw8UHRofHh0aHBwgJC4nICIsIxwcKDcpLDAxNDQ0Hyc5PTgyPC4zNDL/2wBDAQkJCQwLDBgNDRgyIRwhMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjL/wgARCAAPABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAABAAD/8QAFgEBAQEAAAAAAAAAAAAAAAAAAQID/9oADAMBAAIQAxAAAAFT8FZ2O0k//8QAGhAAAgMBAQAAAAAAAAAAAAAAAQMAAgQREv/aAAgBAQABBQKjlSrlWB3ZwVme5ynf/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAHBAAAQMFAAAAAAAAAAAAAAAAAQAxMgIQERIh/9oACAEBAAY/ApI4qbiI3a8Qv//EABkQAQADAQEAAAAAAAAAAAAAAAEAESExQf/aAAgBAQABPyFye1oxjlfa2PYhNKuSmOIolve5P//aAAwDAQACAAMAAAAQ/wAv/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAGxABAAMAAwEAAAAAAAAAAAAAAQARITFhgVH/2gAIAQEAAT8QM2iidk8gDBxpXxpKEyFur6g1K8mkDHnuOkNaTaz/2Q==","width":2000,"height":1500,"src":"/static/61333c450e3d49c0054f6a6f26c26acd/a66ad/diffuse.jpg","srcSet":"/static/61333c450e3d49c0054f6a6f26c26acd/a66ad/diffuse.jpg 1x,\n/static/61333c450e3d49c0054f6a6f26c26acd/d9c19/diffuse.jpg 1.5x,\n/static/61333c450e3d49c0054f6a6f26c26acd/ff044/diffuse.jpg 2x"}}},"allMarkdownRemark":{"edges":[{"node":{"timeToRead":9,"frontmatter":{"title":"Pulse Oximeter Monitor Project","date":"2021-03-08T15:11:55.000Z","tags":["Project","Software Engineering"]},"excerpt":"When the doctors left us with a medical device to monitor the blood oxygen levels of my newborn son, the less than desirable interface…","html":"<p>When the doctors left us with a medical device to monitor the blood oxygen levels of my newborn son, the less than desirable interface converted us into zombies.\nAlerts beeped when SPO2 or BPM reached specific thresholds and nothing else.\nThe device, the <em>Masimo RAD8</em> contains space to store data except no patient based mechanisms to read the results it collects.</p>\n<p>It’s crazy!\nMedical professionals leave patients with a device where caregivers can’t monitor nor track progress over long periods of time;\npreventing the collection of valuable data doctors require to inform their decisions and care plans.\nPlacing the blame on doctors is unfair since these devices and their options are limited by supply and insurance companies.\nThe inconvenient part stems from infant pulse oximeters, either costing a small fortune for a medical grade one or non-medical grade ones not taken seriously by doctors.\nWe purchased the <em>wellvue</em> which was an order of magnitude more convenient.\nThe battery operated machine lasted through the night, wireless, gathering data, and printed out summaries over single recording periods.\nData collection and reporting wasn’t ideal but provided insight into the patient’s overall progress, for example: patient was below 92% SPO2 for 12.5 minutes over a 10 hour period.\nIt was impossible to track the reliability of the device and the accuracy of the recorded measurements.\nWe ended up returning the device because of its unreliability and our doctors didn’t trust it.</p>\n<p>When our insurance company signed off on renting the <em>RAD8</em>, the pulmonary team was ecstatic, but the enthusiasm in my eyes quickly drained after figuring out how much of a burden it was to use.\nThe <em>RAD8</em> advertises storing 72 hours worth of data but specialized software is required to retrieve it.\nVisiting the doctors office to read data off the device with the given frequency wasn’t sustainable.\nThe doctors expected us to record alerts by hand as they didn’t mention any method for data retrieval.\nManual data recording is too error prone of a task, particularly when the best time to gather reliable information is when both patient and parent are sleeping.\nThis was worse in every way to the <em>Wellvue</em>, with the exception of its reliability.\nI took action once noticing the serial interface on its back.</p>\n<h2>Project Goals</h2>\n<p>The project had modest ambitions and I was on a timeline through the initial implementation cycle for this to be useful for my family.\nIt needed to:</p>\n<ol>\n<li>record readings in a centralized system that can be queried</li>\n<li>contain a web interface (in order to monitor and query from any device)</li>\n<li>perform queries to answer questions about SPO2 levels</li>\n<li>display live numerical readings (enables remote monitoring)</li>\n</ol>\n<p>Recreating an interface similar to hospital displays was ideal but the need to get the basics completed to answer the doctors’ questions outweighed those ambitions.\nThe extended goals:</p>\n<ul>\n<li class=\"task-list-item\"><input type=\"checkbox\" checked disabled> graph historical data to get visual context showing trends</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" checked disabled> add live visualizations</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" disabled> in-depth queries and query parameters</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" disabled> extendible to include more medical grade pulse oximeters</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" disabled> customizable data storage (MySQL / PostgreSQL / Mnesia)</li>\n</ul>\n<h2>A Journey through a Proprietary Wonderland</h2>\n<p>After digging, Philips has a proprietary protocol named <em>vuelink</em> that gives the most insightful data to read from the device.\nWith time short, I did not decode the protocol (wish I did).\nInstead, I used the basic <em>ASCII</em> standards which provided the basic yet important data: <em>BPM, SPO2, Perfusion Index</em> over standard serial protocols.\n<em>ASCII</em> doesn’t contain the <em>Signal IQ</em> information that’s viewable on the physical display as <em>SIQ</em>, measuring the confidence level of individual readings.\n<em>SIQ</em> makes me want to reverse engineer the <em>vuelink</em> protocol, because it creates the possibility to filter for high confidence readings during analysis.\nWatching these machines at hospitals, they display a variety of waveforms and display the changes to them indicating measurement stability.\nThat type of data would enable more sophisticated waveform analysis, but I needed something quick making it outside the project’s scope.</p>\n<p>The documentation describing device setup was less than desirable.\nFirst, I had to figure out how to unlock it.\nThe medical supply company “set the prescription” and then do the wonderful work of locking the device.\nThis makes settings unadjustable, including the noise level of alerts.\nThese are loud and can wake up a sleeping infant which exacerbates existing medical issues when they need to rest.\nStep one was getting the instruction manual and figuring out the crazy way to unlock the <em>RAD8</em>.\nNext, the serial interface needed configuration to function properly.\nOnce accomplished, the official manual stated it take measurements every 500ms, which wasn’t true.\nI noticed this while analyzing data where my original calculations to get the duration of measurements was:</p>\n<span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>d</mi><mi>u</mi><mi>r</mi><mi>a</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi><mo>=</mo><mfrac><mrow><munderover><mo>∑</mo><mrow><mi>r</mi><mi>e</mi><mi>a</mi><mi>d</mi><mi>i</mi><mi>n</mi><mi>g</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></munderover><mn>1</mn></mrow><mfrac><msub><mn>1</mn><mrow><mi>r</mi><mi>e</mi><mi>a</mi><mi>d</mi><mi>i</mi><mi>n</mi><mi>g</mi></mrow></msub><mrow><mn>50</mn><msub><mn>0</mn><mrow><mi>m</mi><mi>s</mi></mrow></msub></mrow></mfrac></mfrac><mo>=</mo><mfrac><mrow><mi>n</mi><mi>u</mi><mi>m</mi><mi>O</mi><mi>f</mi><mi>R</mi><mi>e</mi><mi>a</mi><mi>d</mi><mi>i</mi><mi>n</mi><mi>g</mi><mi>s</mi></mrow><mrow><mi>r</mi><mi>e</mi><mi>a</mi><mi>d</mi><mi>i</mi><mi>n</mi><mi>g</mi><mi>R</mi><mi>a</mi><mi>t</mi><mi>e</mi></mrow></mfrac></mrow><annotation encoding=\"application/x-tex\">duration = \\frac{\\sum_{reading=1}^{n} 1}{\\frac{1_{reading}}{500_{ms}}} = \\frac{numOfReadings}{readingRate}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">d</span><span class=\"mord mathdefault\">u</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\">n</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.929398em;vertical-align:-1.2992879999999998em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.6301100000000002em;\"><span style=\"top:-2.1458120000000003em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9641879999999998em;\"><span style=\"top:-2.655em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">5</span><span class=\"mord mtight\">0</span><span class=\"mord mtight\"><span class=\"mord mtight\">0</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.16454285714285719em;\"><span style=\"top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">m</span><span class=\"mord mathdefault mtight\">s</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.51308em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3448em;\"><span style=\"top:-2.3487714285714287em;margin-left:0em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathdefault mtight\">e</span><span class=\"mord mathdefault mtight\">a</span><span class=\"mord mathdefault mtight\">d</span><span class=\"mord mathdefault mtight\">i</span><span class=\"mord mathdefault mtight\">n</span><span class=\"mord mathdefault mtight\" style=\"margin-right:0.03588em;\">g</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.29011428571428566em;\"><span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.44509999999999994em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.825818em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mop\"><span class=\"mop op-symbol small-op\" style=\"position:relative;top:-0.0000050000000000050004em;\">∑</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.804292em;\"><span style=\"top:-2.40029em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathdefault mtight\">e</span><span class=\"mord mathdefault mtight\">a</span><span class=\"mord mathdefault mtight\">d</span><span class=\"mord mathdefault mtight\">i</span><span class=\"mord mathdefault mtight\">n</span><span class=\"mord mathdefault mtight\" style=\"margin-right:0.03588em;\">g</span><span class=\"mrel mtight\">=</span><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.2029em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">n</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.43581800000000004em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.2992879999999998em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.25188em;vertical-align:-0.8804400000000001em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.3714399999999998em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\">d</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">g</span><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">e</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\">u</span><span class=\"mord mathdefault\">m</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">O</span><span class=\"mord mathdefault\" style=\"margin-right:0.10764em;\">f</span><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\">d</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">g</span><span class=\"mord mathdefault\">s</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8804400000000001em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span></span>\n<p>This result allowed us to generate the amount of time recorded directly, but it was a lie.\nChecking the database timestamps, the <em>reading rate</em> was actually <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mfrac><msub><mn>1</mn><mrow><mi>r</mi><mi>e</mi><mi>a</mi><mi>d</mi><mi>i</mi><mi>n</mi><mi>g</mi></mrow></msub><msub><mn>1</mn><mi>s</mi></msub></mfrac></mrow><annotation encoding=\"application/x-tex\">\\frac{1_{reading}}{1_s}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.4092879999999997em;vertical-align:-0.44509999999999994em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9641879999999998em;\"><span style=\"top:-2.655em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.16454285714285719em;\"><span style=\"top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathdefault mtight\">s</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.51308em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3448em;\"><span style=\"top:-2.3487714285714287em;margin-left:0em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathdefault mtight\">e</span><span class=\"mord mathdefault mtight\">a</span><span class=\"mord mathdefault mtight\">d</span><span class=\"mord mathdefault mtight\">i</span><span class=\"mord mathdefault mtight\">n</span><span class=\"mord mathdefault mtight\" style=\"margin-right:0.03588em;\">g</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.29011428571428566em;\"><span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.44509999999999994em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span>…\nIt was a lot of fun to discover and tell the pulmonary doctors the wrong results for the first two days because of bad documentation 🤦🏻‍♂️.\nThere were other issues that were more pressing at the time which made me realize the incorrect calculation later than I would have liked.\nYou might be wondering, was it the polling rate?\nNo, the serial device is immediately read and asked for more information after it returns with a result, timing out at <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><msub><mn>5</mn><mi>s</mi></msub></mrow><annotation encoding=\"application/x-tex\">5_s</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.79444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord\">5</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.151392em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">s</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> for a reading.\nThe last bit of proprietary fun came from the information display and error codes.\nThese were bit masks that were represented in ASCII as hexadecimal bit-masks.\nI copied the common ones from a python project which was a great help in the creation of this application.</p>\n<h2>Implementation Specifics</h2>\n<p>The project utilizes the Elixir programming language because of its immediate familiarity and its failure handling mechanisms.\nThe actor model that erlang provides to supervise processes is ideal for handling connection issues and retry logic.\nWith all the built-in features of erlang, reconnecting devices came for free because of the supervision strategies for processes!\nThe serial connection was handled under a supervised process so if disconnects or unhandled errors occur, the supervisor keeps retrying to restore the task to a stable state.\nUsers can use the device in the way they need to at the time they need to.\nIt doesn’t matter if the device is turned off, unplugged, or can’t communicate with the OS.\nThe supervisor keeps retrying and spins up new processes errors are encountered, repeatedly attempting to stabilize.</p>\n<p>The <code class=\"language-text\">Nerves UART</code> library is used to handle serial connections.\nConnecting to the <em>RAD8</em> was simple since the only concern was finding the proper serial device to communicate with.\nUsing a heuristic that worked on both MacOS and Ubuntu, which was grabbing the last result in the list of serial devices achieved the goal.\nIf there are issues connecting to the RAD8, it will certainly be from this convenient hack.\nIts purpose, automated connection handling upon reconnects since the serial device name can change.\nUsing the web framework <code class=\"language-text\">phoenix</code> was really straight forward and easy to utilize.\nI wanted an excuse to use <code class=\"language-text\">liveview</code> in order to see how things worked to do server side rendering for the first time and that was its own adventure.\nAll of the logic designed into the web application is built around <code class=\"language-text\">phoenix liveview</code> and the charts and graphs were built using <code class=\"language-text\">contex</code> which generates an <code class=\"language-text\">svg</code>.</p>\n<p>Testing and development was a pain at first.\nIt required having the physical device connected.\nBuilding a fake data input system that randomly generates data was the best way to rapidly increase productively while still being able to use the <em>RAD8</em>.\nThe data storage mechanism was initially intended to be provided by the application directly via <code class=\"language-text\">Mnesia</code> which is an erlang backed database of sorts.\nFor the sake of speed, I had to forgo this choice and require that users setup a <em>Postgresql</em> database instead.\nNot requiring a RDBMS would have been awesome for simplicity but ultimately, anyone using this application is going to need to be savvy enough to install a RDBMS anyways.</p>\n<h2>Retrospective on Technological Choices</h2>\n<p>Using Elixir was a good fit for the project overall.\nIt was reliable and has good integration with libraries that can talk with embedded hardware.\nUsing phoenix as the web framework was fine and honestly, probably any web framework would have been sufficient.\nI was able to use <code class=\"language-text\">phoenix liveview</code> and dig my teeth into it for the first time.\nI’m not a <code class=\"language-text\">javascript</code> developer and I prefer doing things on the backend so I’ve put off learning JS for a long time.\nBy using <code class=\"language-text\">liveview</code> I have been able to put off learning JS longer but honestly, I had to learn a lot more about a framework then I would have liked.\nIt wasn’t particularly clear what I was doing at times and there’s a lot of magic involved in variable naming and configuring things to work well with <code class=\"language-text\">liveview</code>.\nI think overall it was faster to setup than running the frontend in JS but I don’t know if I’ll ever do that again.</p>\n<p>To me, <code class=\"language-text\">liveview</code> seems to shine for server side control of visual updates and information.\nThis project was perfect because all I wanted to do was display and update information with minimal interaction.\nIf this were a project that needed a lot more frontend involvement, I would definitely choose JS over <code class=\"language-text\">liveview</code> simply because JS is the domain of the frontend.\nNo matter how much backend engineers want to complain about it and avoid it, JS is a very capable language in the environment it was intended to run in.\nI say this with love for both sides, the <code class=\"language-text\">phoenix liveview</code> project is pretty incredible that backend developers have the ability to make more frontend things possible that are smooth and dynamic.\nAt the same time, is it really worth the effort of learning another framework with more limited use cases where an escape hatch into JS is needed for complex UI interactions?\nMaybe, but after this project, if I need to do frontend work again it will most likely be in raw JS.\nOverall, if I were to create a serious project that I intended to support long term, I’d be sticking with JS.\nThe case for <code class=\"language-text\">liveview</code> for me personally shines where the backend needs to control the frontend.\nThat said, the simplicity of having <code class=\"language-text\">liveview</code> for the management of this project was awesome.\nThe entire stack is in <code class=\"language-text\">Elixir</code> except for the generated JS that’s run and served by <code class=\"language-text\">phoneix</code> itself.\nIt’s pretty easy to make an IP address publicly exposed so asking a doctor to go to a particular link so they can get some updates or run some queries live is pretty trivial.</p>\n<h2>Final Thoughts</h2>\n<p>If you’re interested in the project, it’s <a href=\"https://github.com/k-cross/pulse_oximeter\">here</a>.\nIt was built for my son to make his health care better and my family’s lives easier.\nI never got to fully appreciate all the features and work I put into it, but I tried to make something simple and useful for technically inclined kindred spirits alike.\nThese features were requested by others and I genuinely hope that they keep helping people in need.</p>\n<p>I don’t think people shouldn need to have additional equipment and gear in order to get data from these devices, they need to be made with both doctors and patients in mind.\nIf I was harsh on the doctors in this article about this device, please know it was just about the recommended device and not an insult to their capability.\nWe had an incredible team of doctors that were all wonderful to interact with.\nThey were kind and caring and often went beyond the scope of their duties to make sure our son’s needs were met.\nAll the hatred in this article is directed at medical institutions that treat patients as a cost of business instead of humans that need care.</p>\n<p>This is probably as far as I’ll go with the project, but I’ll probably end up experimenting with some other strategies as a learning exercise which may enhance its reliability.\nUnfortunately, due to the technical limitations of the project requiring users to buy a serial cable and setting up the RAD8, putting additional effort into the ease of use with software setup wouldn’t enable any additional non-technical users.\nIn short, it’s as easy as it’s going to get but I wish it was accessible to a wider audience of patients and caregivers.\nThanks for visiting!</p>","htmlAst":{"type":"root","children":[{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"When the doctors left us with a medical device to monitor the blood oxygen levels of my newborn son, the less than desirable interface converted us into zombies.\nAlerts beeped when SPO2 or BPM reached specific thresholds and nothing else.\nThe device, the "},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"Masimo RAD8"}]},{"type":"text","value":" contains space to store data except no patient based mechanisms to read the results it collects."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"It’s crazy!\nMedical professionals leave patients with a device where caregivers can’t monitor nor track progress over long periods of time;\npreventing the collection of valuable data doctors require to inform their decisions and care plans.\nPlacing the blame on doctors is unfair since these devices and their options are limited by supply and insurance companies.\nThe inconvenient part stems from infant pulse oximeters, either costing a small fortune for a medical grade one or non-medical grade ones not taken seriously by doctors.\nWe purchased the "},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"wellvue"}]},{"type":"text","value":" which was an order of magnitude more convenient.\nThe battery operated machine lasted through the night, wireless, gathering data, and printed out summaries over single recording periods.\nData collection and reporting wasn’t ideal but provided insight into the patient’s overall progress, for example: patient was below 92% SPO2 for 12.5 minutes over a 10 hour period.\nIt was impossible to track the reliability of the device and the accuracy of the recorded measurements.\nWe ended up returning the device because of its unreliability and our doctors didn’t trust it."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"When our insurance company signed off on renting the "},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"RAD8"}]},{"type":"text","value":", the pulmonary team was ecstatic, but the enthusiasm in my eyes quickly drained after figuring out how much of a burden it was to use.\nThe "},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"RAD8"}]},{"type":"text","value":" advertises storing 72 hours worth of data but specialized software is required to retrieve it.\nVisiting the doctors office to read data off the device with the given frequency wasn’t sustainable.\nThe doctors expected us to record alerts by hand as they didn’t mention any method for data retrieval.\nManual data recording is too error prone of a task, particularly when the best time to gather reliable information is when both patient and parent are sleeping.\nThis was worse in every way to the "},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"Wellvue"}]},{"type":"text","value":", with the exception of its reliability.\nI took action once noticing the serial interface on its back."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"Project Goals"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"The project had modest ambitions and I was on a timeline through the initial implementation cycle for this to be useful for my family.\nIt needed to:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ol","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"record readings in a centralized system that can be queried"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"contain a web interface (in order to monitor and query from any device)"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"perform queries to answer questions about SPO2 levels"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"display live numerical readings (enables remote monitoring)"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Recreating an interface similar to hospital displays was ideal but the need to get the basics completed to answer the doctors’ questions outweighed those ambitions.\nThe extended goals:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{"className":["task-list-item"]},"children":[{"type":"element","tagName":"input","properties":{"type":"checkbox","checked":true,"disabled":true},"children":[]},{"type":"text","value":" graph historical data to get visual context showing trends"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{"className":["task-list-item"]},"children":[{"type":"element","tagName":"input","properties":{"type":"checkbox","checked":true,"disabled":true},"children":[]},{"type":"text","value":" add live visualizations"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{"className":["task-list-item"]},"children":[{"type":"element","tagName":"input","properties":{"type":"checkbox","disabled":true},"children":[]},{"type":"text","value":" in-depth queries and query parameters"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{"className":["task-list-item"]},"children":[{"type":"element","tagName":"input","properties":{"type":"checkbox","disabled":true},"children":[]},{"type":"text","value":" extendible to include more medical grade pulse oximeters"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{"className":["task-list-item"]},"children":[{"type":"element","tagName":"input","properties":{"type":"checkbox","disabled":true},"children":[]},{"type":"text","value":" customizable data storage (MySQL / PostgreSQL / Mnesia)"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"A Journey through a Proprietary Wonderland"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"After digging, Philips has a proprietary protocol named "},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"vuelink"}]},{"type":"text","value":" that gives the most insightful data to read from the device.\nWith time short, I did not decode the protocol (wish I did).\nInstead, I used the basic "},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"ASCII"}]},{"type":"text","value":" standards which provided the basic yet important data: "},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"BPM, SPO2, Perfusion Index"}]},{"type":"text","value":" over standard serial protocols.\n"},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"ASCII"}]},{"type":"text","value":" doesn’t contain the "},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"Signal IQ"}]},{"type":"text","value":" information that’s viewable on the physical display as "},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"SIQ"}]},{"type":"text","value":", measuring the confidence level of individual readings.\n"},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"SIQ"}]},{"type":"text","value":" makes me want to reverse engineer the "},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"vuelink"}]},{"type":"text","value":" protocol, because it creates the possibility to filter for high confidence readings during analysis.\nWatching these machines at hospitals, they display a variety of waveforms and display the changes to them indicating measurement stability.\nThat type of data would enable more sophisticated waveform analysis, but I needed something quick making it outside the project’s scope."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"The documentation describing device setup was less than desirable.\nFirst, I had to figure out how to unlock it.\nThe medical supply company “set the prescription” and then do the wonderful work of locking the device.\nThis makes settings unadjustable, including the noise level of alerts.\nThese are loud and can wake up a sleeping infant which exacerbates existing medical issues when they need to rest.\nStep one was getting the instruction manual and figuring out the crazy way to unlock the "},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"RAD8"}]},{"type":"text","value":".\nNext, the serial interface needed configuration to function properly.\nOnce accomplished, the official manual stated it take measurements every 500ms, which wasn’t true.\nI noticed this while analyzing data where my original calculations to get the duration of measurements was:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["katex-display"]},"children":[{"type":"element","tagName":"span","properties":{"className":["katex"]},"children":[{"type":"element","tagName":"span","properties":{"className":["katex-mathml"]},"children":[{"type":"element","tagName":"math","properties":{},"children":[{"type":"element","tagName":"semantics","properties":{},"children":[{"type":"element","tagName":"mrow","properties":{},"children":[{"type":"element","tagName":"mi","properties":{},"children":[{"type":"text","value":"d"}]},{"type":"element","tagName":"mi","properties":{},"children":[{"type":"text","value":"u"}]},{"type":"element","tagName":"mi","properties":{},"children":[{"type":"text","value":"r"}]},{"type":"element","tagName":"mi","properties":{},"children":[{"type":"text","value":"a"}]},{"type":"element","tagName":"mi","properties":{},"children":[{"type":"text","value":"t"}]},{"type":"element","tagName":"mi","properties":{},"children":[{"type":"text","value":"i"}]},{"type":"element","tagName":"mi","properties":{},"children":[{"type":"text","value":"o"}]},{"type":"element","tagName":"mi","properties":{},"children":[{"type":"text","value":"n"}]},{"type":"element","tagName":"mo","properties":{},"children":[{"type":"text","value":"="}]},{"type":"element","tagName":"mfrac","properties":{},"children":[{"type":"element","tagName":"mrow","properties":{},"children":[{"type":"element","tagName":"munderover","properties":{},"children":[{"type":"element","tagName":"mo","properties":{},"children":[{"type":"text","value":"∑"}]},{"type":"element","tagName":"mrow","properties":{},"children":[{"type":"element","tagName":"mi","properties":{},"children":[{"type":"text","value":"r"}]},{"type":"element","tagName":"mi","properties":{},"children":[{"type":"text","value":"e"}]},{"type":"element","tagName":"mi","properties":{},"children":[{"type":"text","value":"a"}]},{"type":"element","tagName":"mi","properties":{},"children":[{"type":"text","value":"d"}]},{"type":"element","tagName":"mi","properties":{},"children":[{"type":"text","value":"i"}]},{"type":"element","tagName":"mi","properties":{},"children":[{"type":"text","value":"n"}]},{"type":"element","tagName":"mi","properties":{},"children":[{"type":"text","value":"g"}]},{"type":"element","tagName":"mo","properties":{},"children":[{"type":"text","value":"="}]},{"type":"element","tagName":"mn","properties":{},"children":[{"type":"text","value":"1"}]}]},{"type":"element","tagName":"mi","properties":{},"children":[{"type":"text","value":"n"}]}]},{"type":"element","tagName":"mn","properties":{},"children":[{"type":"text","value":"1"}]}]},{"type":"element","tagName":"mfrac","properties":{},"children":[{"type":"element","tagName":"msub","properties":{},"children":[{"type":"element","tagName":"mn","properties":{},"children":[{"type":"text","value":"1"}]},{"type":"element","tagName":"mrow","properties":{},"children":[{"type":"element","tagName":"mi","properties":{},"children":[{"type":"text","value":"r"}]},{"type":"element","tagName":"mi","properties":{},"children":[{"type":"text","value":"e"}]},{"type":"element","tagName":"mi","properties":{},"children":[{"type":"text","value":"a"}]},{"type":"element","tagName":"mi","properties":{},"children":[{"type":"text","value":"d"}]},{"type":"element","tagName":"mi","properties":{},"children":[{"type":"text","value":"i"}]},{"type":"element","tagName":"mi","properties":{},"children":[{"type":"text","value":"n"}]},{"type":"element","tagName":"mi","properties":{},"children":[{"type":"text","value":"g"}]}]}]},{"type":"element","tagName":"mrow","properties":{},"children":[{"type":"element","tagName":"mn","properties":{},"children":[{"type":"text","value":"50"}]},{"type":"element","tagName":"msub","properties":{},"children":[{"type":"element","tagName":"mn","properties":{},"children":[{"type":"text","value":"0"}]},{"type":"element","tagName":"mrow","properties":{},"children":[{"type":"element","tagName":"mi","properties":{},"children":[{"type":"text","value":"m"}]},{"type":"element","tagName":"mi","properties":{},"children":[{"type":"text","value":"s"}]}]}]}]}]}]},{"type":"element","tagName":"mo","properties":{},"children":[{"type":"text","value":"="}]},{"type":"element","tagName":"mfrac","properties":{},"children":[{"type":"element","tagName":"mrow","properties":{},"children":[{"type":"element","tagName":"mi","properties":{},"children":[{"type":"text","value":"n"}]},{"type":"element","tagName":"mi","properties":{},"children":[{"type":"text","value":"u"}]},{"type":"element","tagName":"mi","properties":{},"children":[{"type":"text","value":"m"}]},{"type":"element","tagName":"mi","properties":{},"children":[{"type":"text","value":"O"}]},{"type":"element","tagName":"mi","properties":{},"children":[{"type":"text","value":"f"}]},{"type":"element","tagName":"mi","properties":{},"children":[{"type":"text","value":"R"}]},{"type":"element","tagName":"mi","properties":{},"children":[{"type":"text","value":"e"}]},{"type":"element","tagName":"mi","properties":{},"children":[{"type":"text","value":"a"}]},{"type":"element","tagName":"mi","properties":{},"children":[{"type":"text","value":"d"}]},{"type":"element","tagName":"mi","properties":{},"children":[{"type":"text","value":"i"}]},{"type":"element","tagName":"mi","properties":{},"children":[{"type":"text","value":"n"}]},{"type":"element","tagName":"mi","properties":{},"children":[{"type":"text","value":"g"}]},{"type":"element","tagName":"mi","properties":{},"children":[{"type":"text","value":"s"}]}]},{"type":"element","tagName":"mrow","properties":{},"children":[{"type":"element","tagName":"mi","properties":{},"children":[{"type":"text","value":"r"}]},{"type":"element","tagName":"mi","properties":{},"children":[{"type":"text","value":"e"}]},{"type":"element","tagName":"mi","properties":{},"children":[{"type":"text","value":"a"}]},{"type":"element","tagName":"mi","properties":{},"children":[{"type":"text","value":"d"}]},{"type":"element","tagName":"mi","properties":{},"children":[{"type":"text","value":"i"}]},{"type":"element","tagName":"mi","properties":{},"children":[{"type":"text","value":"n"}]},{"type":"element","tagName":"mi","properties":{},"children":[{"type":"text","value":"g"}]},{"type":"element","tagName":"mi","properties":{},"children":[{"type":"text","value":"R"}]},{"type":"element","tagName":"mi","properties":{},"children":[{"type":"text","value":"a"}]},{"type":"element","tagName":"mi","properties":{},"children":[{"type":"text","value":"t"}]},{"type":"element","tagName":"mi","properties":{},"children":[{"type":"text","value":"e"}]}]}]}]},{"type":"element","tagName":"annotation","properties":{"encoding":"application/x-tex"},"children":[{"type":"text","value":"duration = \\frac{\\sum_{reading=1}^{n} 1}{\\frac{1_{reading}}{500_{ms}}} = \\frac{numOfReadings}{readingRate}"}]}]}]}]},{"type":"element","tagName":"span","properties":{"className":["katex-html"],"ariaHidden":"true"},"children":[{"type":"element","tagName":"span","properties":{"className":["base"]},"children":[{"type":"element","tagName":"span","properties":{"className":["strut"],"style":"height:0.69444em;vertical-align:0em;"},"children":[]},{"type":"element","tagName":"span","properties":{"className":["mord","mathdefault"]},"children":[{"type":"text","value":"d"}]},{"type":"element","tagName":"span","properties":{"className":["mord","mathdefault"]},"children":[{"type":"text","value":"u"}]},{"type":"element","tagName":"span","properties":{"className":["mord","mathdefault"],"style":"margin-right:0.02778em;"},"children":[{"type":"text","value":"r"}]},{"type":"element","tagName":"span","properties":{"className":["mord","mathdefault"]},"children":[{"type":"text","value":"a"}]},{"type":"element","tagName":"span","properties":{"className":["mord","mathdefault"]},"children":[{"type":"text","value":"t"}]},{"type":"element","tagName":"span","properties":{"className":["mord","mathdefault"]},"children":[{"type":"text","value":"i"}]},{"type":"element","tagName":"span","properties":{"className":["mord","mathdefault"]},"children":[{"type":"text","value":"o"}]},{"type":"element","tagName":"span","properties":{"className":["mord","mathdefault"]},"children":[{"type":"text","value":"n"}]},{"type":"element","tagName":"span","properties":{"className":["mspace"],"style":"margin-right:0.2777777777777778em;"},"children":[]},{"type":"element","tagName":"span","properties":{"className":["mrel"]},"children":[{"type":"text","value":"="}]},{"type":"element","tagName":"span","properties":{"className":["mspace"],"style":"margin-right:0.2777777777777778em;"},"children":[]}]},{"type":"element","tagName":"span","properties":{"className":["base"]},"children":[{"type":"element","tagName":"span","properties":{"className":["strut"],"style":"height:2.929398em;vertical-align:-1.2992879999999998em;"},"children":[]},{"type":"element","tagName":"span","properties":{"className":["mord"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mopen","nulldelimiter"]},"children":[]},{"type":"element","tagName":"span","properties":{"className":["mfrac"]},"children":[{"type":"element","tagName":"span","properties":{"className":["vlist-t","vlist-t2"]},"children":[{"type":"element","tagName":"span","properties":{"className":["vlist-r"]},"children":[{"type":"element","tagName":"span","properties":{"className":["vlist"],"style":"height:1.6301100000000002em;"},"children":[{"type":"element","tagName":"span","properties":{"style":"top:-2.1458120000000003em;"},"children":[{"type":"element","tagName":"span","properties":{"className":["pstrut"],"style":"height:3em;"},"children":[]},{"type":"element","tagName":"span","properties":{"className":["mord"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mord"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mopen","nulldelimiter"]},"children":[]},{"type":"element","tagName":"span","properties":{"className":["mfrac"]},"children":[{"type":"element","tagName":"span","properties":{"className":["vlist-t","vlist-t2"]},"children":[{"type":"element","tagName":"span","properties":{"className":["vlist-r"]},"children":[{"type":"element","tagName":"span","properties":{"className":["vlist"],"style":"height:0.9641879999999998em;"},"children":[{"type":"element","tagName":"span","properties":{"style":"top:-2.655em;"},"children":[{"type":"element","tagName":"span","properties":{"className":["pstrut"],"style":"height:3em;"},"children":[]},{"type":"element","tagName":"span","properties":{"className":["sizing","reset-size6","size3","mtight"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mord","mtight"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mord","mtight"]},"children":[{"type":"text","value":"5"}]},{"type":"element","tagName":"span","properties":{"className":["mord","mtight"]},"children":[{"type":"text","value":"0"}]},{"type":"element","tagName":"span","properties":{"className":["mord","mtight"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mord","mtight"]},"children":[{"type":"text","value":"0"}]},{"type":"element","tagName":"span","properties":{"className":["msupsub"]},"children":[{"type":"element","tagName":"span","properties":{"className":["vlist-t","vlist-t2"]},"children":[{"type":"element","tagName":"span","properties":{"className":["vlist-r"]},"children":[{"type":"element","tagName":"span","properties":{"className":["vlist"],"style":"height:0.16454285714285719em;"},"children":[{"type":"element","tagName":"span","properties":{"style":"top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;"},"children":[{"type":"element","tagName":"span","properties":{"className":["pstrut"],"style":"height:2.5em;"},"children":[]},{"type":"element","tagName":"span","properties":{"className":["sizing","reset-size3","size1","mtight"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mord","mtight"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mord","mathdefault","mtight"]},"children":[{"type":"text","value":"m"}]},{"type":"element","tagName":"span","properties":{"className":["mord","mathdefault","mtight"]},"children":[{"type":"text","value":"s"}]}]}]}]}]},{"type":"element","tagName":"span","properties":{"className":["vlist-s"]},"children":[{"type":"text","value":"​"}]}]},{"type":"element","tagName":"span","properties":{"className":["vlist-r"]},"children":[{"type":"element","tagName":"span","properties":{"className":["vlist"],"style":"height:0.143em;"},"children":[{"type":"element","tagName":"span","properties":{},"children":[]}]}]}]}]}]}]}]}]},{"type":"element","tagName":"span","properties":{"style":"top:-3.23em;"},"children":[{"type":"element","tagName":"span","properties":{"className":["pstrut"],"style":"height:3em;"},"children":[]},{"type":"element","tagName":"span","properties":{"className":["frac-line"],"style":"border-bottom-width:0.04em;"},"children":[]}]},{"type":"element","tagName":"span","properties":{"style":"top:-3.51308em;"},"children":[{"type":"element","tagName":"span","properties":{"className":["pstrut"],"style":"height:3em;"},"children":[]},{"type":"element","tagName":"span","properties":{"className":["sizing","reset-size6","size3","mtight"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mord","mtight"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mord","mtight"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mord","mtight"]},"children":[{"type":"text","value":"1"}]},{"type":"element","tagName":"span","properties":{"className":["msupsub"]},"children":[{"type":"element","tagName":"span","properties":{"className":["vlist-t","vlist-t2"]},"children":[{"type":"element","tagName":"span","properties":{"className":["vlist-r"]},"children":[{"type":"element","tagName":"span","properties":{"className":["vlist"],"style":"height:0.3448em;"},"children":[{"type":"element","tagName":"span","properties":{"style":"top:-2.3487714285714287em;margin-left:0em;margin-right:0.07142857142857144em;"},"children":[{"type":"element","tagName":"span","properties":{"className":["pstrut"],"style":"height:2.5em;"},"children":[]},{"type":"element","tagName":"span","properties":{"className":["sizing","reset-size3","size1","mtight"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mord","mtight"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mord","mathdefault","mtight"],"style":"margin-right:0.02778em;"},"children":[{"type":"text","value":"r"}]},{"type":"element","tagName":"span","properties":{"className":["mord","mathdefault","mtight"]},"children":[{"type":"text","value":"e"}]},{"type":"element","tagName":"span","properties":{"className":["mord","mathdefault","mtight"]},"children":[{"type":"text","value":"a"}]},{"type":"element","tagName":"span","properties":{"className":["mord","mathdefault","mtight"]},"children":[{"type":"text","value":"d"}]},{"type":"element","tagName":"span","properties":{"className":["mord","mathdefault","mtight"]},"children":[{"type":"text","value":"i"}]},{"type":"element","tagName":"span","properties":{"className":["mord","mathdefault","mtight"]},"children":[{"type":"text","value":"n"}]},{"type":"element","tagName":"span","properties":{"className":["mord","mathdefault","mtight"],"style":"margin-right:0.03588em;"},"children":[{"type":"text","value":"g"}]}]}]}]}]},{"type":"element","tagName":"span","properties":{"className":["vlist-s"]},"children":[{"type":"text","value":"​"}]}]},{"type":"element","tagName":"span","properties":{"className":["vlist-r"]},"children":[{"type":"element","tagName":"span","properties":{"className":["vlist"],"style":"height:0.29011428571428566em;"},"children":[{"type":"element","tagName":"span","properties":{},"children":[]}]}]}]}]}]}]}]}]}]},{"type":"element","tagName":"span","properties":{"className":["vlist-s"]},"children":[{"type":"text","value":"​"}]}]},{"type":"element","tagName":"span","properties":{"className":["vlist-r"]},"children":[{"type":"element","tagName":"span","properties":{"className":["vlist"],"style":"height:0.44509999999999994em;"},"children":[{"type":"element","tagName":"span","properties":{},"children":[]}]}]}]}]},{"type":"element","tagName":"span","properties":{"className":["mclose","nulldelimiter"]},"children":[]}]}]}]},{"type":"element","tagName":"span","properties":{"style":"top:-3.23em;"},"children":[{"type":"element","tagName":"span","properties":{"className":["pstrut"],"style":"height:3em;"},"children":[]},{"type":"element","tagName":"span","properties":{"className":["frac-line"],"style":"border-bottom-width:0.04em;"},"children":[]}]},{"type":"element","tagName":"span","properties":{"style":"top:-3.825818em;"},"children":[{"type":"element","tagName":"span","properties":{"className":["pstrut"],"style":"height:3em;"},"children":[]},{"type":"element","tagName":"span","properties":{"className":["mord"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mop"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mop","op-symbol","small-op"],"style":"position:relative;top:-0.0000050000000000050004em;"},"children":[{"type":"text","value":"∑"}]},{"type":"element","tagName":"span","properties":{"className":["msupsub"]},"children":[{"type":"element","tagName":"span","properties":{"className":["vlist-t","vlist-t2"]},"children":[{"type":"element","tagName":"span","properties":{"className":["vlist-r"]},"children":[{"type":"element","tagName":"span","properties":{"className":["vlist"],"style":"height:0.804292em;"},"children":[{"type":"element","tagName":"span","properties":{"style":"top:-2.40029em;margin-left:0em;margin-right:0.05em;"},"children":[{"type":"element","tagName":"span","properties":{"className":["pstrut"],"style":"height:2.7em;"},"children":[]},{"type":"element","tagName":"span","properties":{"className":["sizing","reset-size6","size3","mtight"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mord","mtight"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mord","mathdefault","mtight"],"style":"margin-right:0.02778em;"},"children":[{"type":"text","value":"r"}]},{"type":"element","tagName":"span","properties":{"className":["mord","mathdefault","mtight"]},"children":[{"type":"text","value":"e"}]},{"type":"element","tagName":"span","properties":{"className":["mord","mathdefault","mtight"]},"children":[{"type":"text","value":"a"}]},{"type":"element","tagName":"span","properties":{"className":["mord","mathdefault","mtight"]},"children":[{"type":"text","value":"d"}]},{"type":"element","tagName":"span","properties":{"className":["mord","mathdefault","mtight"]},"children":[{"type":"text","value":"i"}]},{"type":"element","tagName":"span","properties":{"className":["mord","mathdefault","mtight"]},"children":[{"type":"text","value":"n"}]},{"type":"element","tagName":"span","properties":{"className":["mord","mathdefault","mtight"],"style":"margin-right:0.03588em;"},"children":[{"type":"text","value":"g"}]},{"type":"element","tagName":"span","properties":{"className":["mrel","mtight"]},"children":[{"type":"text","value":"="}]},{"type":"element","tagName":"span","properties":{"className":["mord","mtight"]},"children":[{"type":"text","value":"1"}]}]}]}]},{"type":"element","tagName":"span","properties":{"style":"top:-3.2029em;margin-right:0.05em;"},"children":[{"type":"element","tagName":"span","properties":{"className":["pstrut"],"style":"height:2.7em;"},"children":[]},{"type":"element","tagName":"span","properties":{"className":["sizing","reset-size6","size3","mtight"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mord","mtight"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mord","mathdefault","mtight"]},"children":[{"type":"text","value":"n"}]}]}]}]}]},{"type":"element","tagName":"span","properties":{"className":["vlist-s"]},"children":[{"type":"text","value":"​"}]}]},{"type":"element","tagName":"span","properties":{"className":["vlist-r"]},"children":[{"type":"element","tagName":"span","properties":{"className":["vlist"],"style":"height:0.43581800000000004em;"},"children":[{"type":"element","tagName":"span","properties":{},"children":[]}]}]}]}]}]},{"type":"element","tagName":"span","properties":{"className":["mspace"],"style":"margin-right:0.16666666666666666em;"},"children":[]},{"type":"element","tagName":"span","properties":{"className":["mord"]},"children":[{"type":"text","value":"1"}]}]}]}]},{"type":"element","tagName":"span","properties":{"className":["vlist-s"]},"children":[{"type":"text","value":"​"}]}]},{"type":"element","tagName":"span","properties":{"className":["vlist-r"]},"children":[{"type":"element","tagName":"span","properties":{"className":["vlist"],"style":"height:1.2992879999999998em;"},"children":[{"type":"element","tagName":"span","properties":{},"children":[]}]}]}]}]},{"type":"element","tagName":"span","properties":{"className":["mclose","nulldelimiter"]},"children":[]}]},{"type":"element","tagName":"span","properties":{"className":["mspace"],"style":"margin-right:0.2777777777777778em;"},"children":[]},{"type":"element","tagName":"span","properties":{"className":["mrel"]},"children":[{"type":"text","value":"="}]},{"type":"element","tagName":"span","properties":{"className":["mspace"],"style":"margin-right:0.2777777777777778em;"},"children":[]}]},{"type":"element","tagName":"span","properties":{"className":["base"]},"children":[{"type":"element","tagName":"span","properties":{"className":["strut"],"style":"height:2.25188em;vertical-align:-0.8804400000000001em;"},"children":[]},{"type":"element","tagName":"span","properties":{"className":["mord"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mopen","nulldelimiter"]},"children":[]},{"type":"element","tagName":"span","properties":{"className":["mfrac"]},"children":[{"type":"element","tagName":"span","properties":{"className":["vlist-t","vlist-t2"]},"children":[{"type":"element","tagName":"span","properties":{"className":["vlist-r"]},"children":[{"type":"element","tagName":"span","properties":{"className":["vlist"],"style":"height:1.3714399999999998em;"},"children":[{"type":"element","tagName":"span","properties":{"style":"top:-2.314em;"},"children":[{"type":"element","tagName":"span","properties":{"className":["pstrut"],"style":"height:3em;"},"children":[]},{"type":"element","tagName":"span","properties":{"className":["mord"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mord","mathdefault"],"style":"margin-right:0.02778em;"},"children":[{"type":"text","value":"r"}]},{"type":"element","tagName":"span","properties":{"className":["mord","mathdefault"]},"children":[{"type":"text","value":"e"}]},{"type":"element","tagName":"span","properties":{"className":["mord","mathdefault"]},"children":[{"type":"text","value":"a"}]},{"type":"element","tagName":"span","properties":{"className":["mord","mathdefault"]},"children":[{"type":"text","value":"d"}]},{"type":"element","tagName":"span","properties":{"className":["mord","mathdefault"]},"children":[{"type":"text","value":"i"}]},{"type":"element","tagName":"span","properties":{"className":["mord","mathdefault"]},"children":[{"type":"text","value":"n"}]},{"type":"element","tagName":"span","properties":{"className":["mord","mathdefault"],"style":"margin-right:0.03588em;"},"children":[{"type":"text","value":"g"}]},{"type":"element","tagName":"span","properties":{"className":["mord","mathdefault"],"style":"margin-right:0.00773em;"},"children":[{"type":"text","value":"R"}]},{"type":"element","tagName":"span","properties":{"className":["mord","mathdefault"]},"children":[{"type":"text","value":"a"}]},{"type":"element","tagName":"span","properties":{"className":["mord","mathdefault"]},"children":[{"type":"text","value":"t"}]},{"type":"element","tagName":"span","properties":{"className":["mord","mathdefault"]},"children":[{"type":"text","value":"e"}]}]}]},{"type":"element","tagName":"span","properties":{"style":"top:-3.23em;"},"children":[{"type":"element","tagName":"span","properties":{"className":["pstrut"],"style":"height:3em;"},"children":[]},{"type":"element","tagName":"span","properties":{"className":["frac-line"],"style":"border-bottom-width:0.04em;"},"children":[]}]},{"type":"element","tagName":"span","properties":{"style":"top:-3.677em;"},"children":[{"type":"element","tagName":"span","properties":{"className":["pstrut"],"style":"height:3em;"},"children":[]},{"type":"element","tagName":"span","properties":{"className":["mord"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mord","mathdefault"]},"children":[{"type":"text","value":"n"}]},{"type":"element","tagName":"span","properties":{"className":["mord","mathdefault"]},"children":[{"type":"text","value":"u"}]},{"type":"element","tagName":"span","properties":{"className":["mord","mathdefault"]},"children":[{"type":"text","value":"m"}]},{"type":"element","tagName":"span","properties":{"className":["mord","mathdefault"],"style":"margin-right:0.02778em;"},"children":[{"type":"text","value":"O"}]},{"type":"element","tagName":"span","properties":{"className":["mord","mathdefault"],"style":"margin-right:0.10764em;"},"children":[{"type":"text","value":"f"}]},{"type":"element","tagName":"span","properties":{"className":["mord","mathdefault"],"style":"margin-right:0.00773em;"},"children":[{"type":"text","value":"R"}]},{"type":"element","tagName":"span","properties":{"className":["mord","mathdefault"]},"children":[{"type":"text","value":"e"}]},{"type":"element","tagName":"span","properties":{"className":["mord","mathdefault"]},"children":[{"type":"text","value":"a"}]},{"type":"element","tagName":"span","properties":{"className":["mord","mathdefault"]},"children":[{"type":"text","value":"d"}]},{"type":"element","tagName":"span","properties":{"className":["mord","mathdefault"]},"children":[{"type":"text","value":"i"}]},{"type":"element","tagName":"span","properties":{"className":["mord","mathdefault"]},"children":[{"type":"text","value":"n"}]},{"type":"element","tagName":"span","properties":{"className":["mord","mathdefault"],"style":"margin-right:0.03588em;"},"children":[{"type":"text","value":"g"}]},{"type":"element","tagName":"span","properties":{"className":["mord","mathdefault"]},"children":[{"type":"text","value":"s"}]}]}]}]},{"type":"element","tagName":"span","properties":{"className":["vlist-s"]},"children":[{"type":"text","value":"​"}]}]},{"type":"element","tagName":"span","properties":{"className":["vlist-r"]},"children":[{"type":"element","tagName":"span","properties":{"className":["vlist"],"style":"height:0.8804400000000001em;"},"children":[{"type":"element","tagName":"span","properties":{},"children":[]}]}]}]}]},{"type":"element","tagName":"span","properties":{"className":["mclose","nulldelimiter"]},"children":[]}]}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"This result allowed us to generate the amount of time recorded directly, but it was a lie.\nChecking the database timestamps, the "},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"reading rate"}]},{"type":"text","value":" was actually "},{"type":"element","tagName":"span","properties":{"className":["katex"]},"children":[{"type":"element","tagName":"span","properties":{"className":["katex-mathml"]},"children":[{"type":"element","tagName":"math","properties":{},"children":[{"type":"element","tagName":"semantics","properties":{},"children":[{"type":"element","tagName":"mrow","properties":{},"children":[{"type":"element","tagName":"mfrac","properties":{},"children":[{"type":"element","tagName":"msub","properties":{},"children":[{"type":"element","tagName":"mn","properties":{},"children":[{"type":"text","value":"1"}]},{"type":"element","tagName":"mrow","properties":{},"children":[{"type":"element","tagName":"mi","properties":{},"children":[{"type":"text","value":"r"}]},{"type":"element","tagName":"mi","properties":{},"children":[{"type":"text","value":"e"}]},{"type":"element","tagName":"mi","properties":{},"children":[{"type":"text","value":"a"}]},{"type":"element","tagName":"mi","properties":{},"children":[{"type":"text","value":"d"}]},{"type":"element","tagName":"mi","properties":{},"children":[{"type":"text","value":"i"}]},{"type":"element","tagName":"mi","properties":{},"children":[{"type":"text","value":"n"}]},{"type":"element","tagName":"mi","properties":{},"children":[{"type":"text","value":"g"}]}]}]},{"type":"element","tagName":"msub","properties":{},"children":[{"type":"element","tagName":"mn","properties":{},"children":[{"type":"text","value":"1"}]},{"type":"element","tagName":"mi","properties":{},"children":[{"type":"text","value":"s"}]}]}]}]},{"type":"element","tagName":"annotation","properties":{"encoding":"application/x-tex"},"children":[{"type":"text","value":"\\frac{1_{reading}}{1_s}"}]}]}]}]},{"type":"element","tagName":"span","properties":{"className":["katex-html"],"ariaHidden":"true"},"children":[{"type":"element","tagName":"span","properties":{"className":["base"]},"children":[{"type":"element","tagName":"span","properties":{"className":["strut"],"style":"height:1.4092879999999997em;vertical-align:-0.44509999999999994em;"},"children":[]},{"type":"element","tagName":"span","properties":{"className":["mord"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mopen","nulldelimiter"]},"children":[]},{"type":"element","tagName":"span","properties":{"className":["mfrac"]},"children":[{"type":"element","tagName":"span","properties":{"className":["vlist-t","vlist-t2"]},"children":[{"type":"element","tagName":"span","properties":{"className":["vlist-r"]},"children":[{"type":"element","tagName":"span","properties":{"className":["vlist"],"style":"height:0.9641879999999998em;"},"children":[{"type":"element","tagName":"span","properties":{"style":"top:-2.655em;"},"children":[{"type":"element","tagName":"span","properties":{"className":["pstrut"],"style":"height:3em;"},"children":[]},{"type":"element","tagName":"span","properties":{"className":["sizing","reset-size6","size3","mtight"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mord","mtight"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mord","mtight"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mord","mtight"]},"children":[{"type":"text","value":"1"}]},{"type":"element","tagName":"span","properties":{"className":["msupsub"]},"children":[{"type":"element","tagName":"span","properties":{"className":["vlist-t","vlist-t2"]},"children":[{"type":"element","tagName":"span","properties":{"className":["vlist-r"]},"children":[{"type":"element","tagName":"span","properties":{"className":["vlist"],"style":"height:0.16454285714285719em;"},"children":[{"type":"element","tagName":"span","properties":{"style":"top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;"},"children":[{"type":"element","tagName":"span","properties":{"className":["pstrut"],"style":"height:2.5em;"},"children":[]},{"type":"element","tagName":"span","properties":{"className":["sizing","reset-size3","size1","mtight"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mord","mathdefault","mtight"]},"children":[{"type":"text","value":"s"}]}]}]}]},{"type":"element","tagName":"span","properties":{"className":["vlist-s"]},"children":[{"type":"text","value":"​"}]}]},{"type":"element","tagName":"span","properties":{"className":["vlist-r"]},"children":[{"type":"element","tagName":"span","properties":{"className":["vlist"],"style":"height:0.143em;"},"children":[{"type":"element","tagName":"span","properties":{},"children":[]}]}]}]}]}]}]}]}]},{"type":"element","tagName":"span","properties":{"style":"top:-3.23em;"},"children":[{"type":"element","tagName":"span","properties":{"className":["pstrut"],"style":"height:3em;"},"children":[]},{"type":"element","tagName":"span","properties":{"className":["frac-line"],"style":"border-bottom-width:0.04em;"},"children":[]}]},{"type":"element","tagName":"span","properties":{"style":"top:-3.51308em;"},"children":[{"type":"element","tagName":"span","properties":{"className":["pstrut"],"style":"height:3em;"},"children":[]},{"type":"element","tagName":"span","properties":{"className":["sizing","reset-size6","size3","mtight"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mord","mtight"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mord","mtight"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mord","mtight"]},"children":[{"type":"text","value":"1"}]},{"type":"element","tagName":"span","properties":{"className":["msupsub"]},"children":[{"type":"element","tagName":"span","properties":{"className":["vlist-t","vlist-t2"]},"children":[{"type":"element","tagName":"span","properties":{"className":["vlist-r"]},"children":[{"type":"element","tagName":"span","properties":{"className":["vlist"],"style":"height:0.3448em;"},"children":[{"type":"element","tagName":"span","properties":{"style":"top:-2.3487714285714287em;margin-left:0em;margin-right:0.07142857142857144em;"},"children":[{"type":"element","tagName":"span","properties":{"className":["pstrut"],"style":"height:2.5em;"},"children":[]},{"type":"element","tagName":"span","properties":{"className":["sizing","reset-size3","size1","mtight"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mord","mtight"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mord","mathdefault","mtight"],"style":"margin-right:0.02778em;"},"children":[{"type":"text","value":"r"}]},{"type":"element","tagName":"span","properties":{"className":["mord","mathdefault","mtight"]},"children":[{"type":"text","value":"e"}]},{"type":"element","tagName":"span","properties":{"className":["mord","mathdefault","mtight"]},"children":[{"type":"text","value":"a"}]},{"type":"element","tagName":"span","properties":{"className":["mord","mathdefault","mtight"]},"children":[{"type":"text","value":"d"}]},{"type":"element","tagName":"span","properties":{"className":["mord","mathdefault","mtight"]},"children":[{"type":"text","value":"i"}]},{"type":"element","tagName":"span","properties":{"className":["mord","mathdefault","mtight"]},"children":[{"type":"text","value":"n"}]},{"type":"element","tagName":"span","properties":{"className":["mord","mathdefault","mtight"],"style":"margin-right:0.03588em;"},"children":[{"type":"text","value":"g"}]}]}]}]}]},{"type":"element","tagName":"span","properties":{"className":["vlist-s"]},"children":[{"type":"text","value":"​"}]}]},{"type":"element","tagName":"span","properties":{"className":["vlist-r"]},"children":[{"type":"element","tagName":"span","properties":{"className":["vlist"],"style":"height:0.29011428571428566em;"},"children":[{"type":"element","tagName":"span","properties":{},"children":[]}]}]}]}]}]}]}]}]}]},{"type":"element","tagName":"span","properties":{"className":["vlist-s"]},"children":[{"type":"text","value":"​"}]}]},{"type":"element","tagName":"span","properties":{"className":["vlist-r"]},"children":[{"type":"element","tagName":"span","properties":{"className":["vlist"],"style":"height:0.44509999999999994em;"},"children":[{"type":"element","tagName":"span","properties":{},"children":[]}]}]}]}]},{"type":"element","tagName":"span","properties":{"className":["mclose","nulldelimiter"]},"children":[]}]}]}]}]},{"type":"text","value":"…\nIt was a lot of fun to discover and tell the pulmonary doctors the wrong results for the first two days because of bad documentation 🤦🏻‍♂️.\nThere were other issues that were more pressing at the time which made me realize the incorrect calculation later than I would have liked.\nYou might be wondering, was it the polling rate?\nNo, the serial device is immediately read and asked for more information after it returns with a result, timing out at "},{"type":"element","tagName":"span","properties":{"className":["katex"]},"children":[{"type":"element","tagName":"span","properties":{"className":["katex-mathml"]},"children":[{"type":"element","tagName":"math","properties":{},"children":[{"type":"element","tagName":"semantics","properties":{},"children":[{"type":"element","tagName":"mrow","properties":{},"children":[{"type":"element","tagName":"msub","properties":{},"children":[{"type":"element","tagName":"mn","properties":{},"children":[{"type":"text","value":"5"}]},{"type":"element","tagName":"mi","properties":{},"children":[{"type":"text","value":"s"}]}]}]},{"type":"element","tagName":"annotation","properties":{"encoding":"application/x-tex"},"children":[{"type":"text","value":"5_s"}]}]}]}]},{"type":"element","tagName":"span","properties":{"className":["katex-html"],"ariaHidden":"true"},"children":[{"type":"element","tagName":"span","properties":{"className":["base"]},"children":[{"type":"element","tagName":"span","properties":{"className":["strut"],"style":"height:0.79444em;vertical-align:-0.15em;"},"children":[]},{"type":"element","tagName":"span","properties":{"className":["mord"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mord"]},"children":[{"type":"text","value":"5"}]},{"type":"element","tagName":"span","properties":{"className":["msupsub"]},"children":[{"type":"element","tagName":"span","properties":{"className":["vlist-t","vlist-t2"]},"children":[{"type":"element","tagName":"span","properties":{"className":["vlist-r"]},"children":[{"type":"element","tagName":"span","properties":{"className":["vlist"],"style":"height:0.151392em;"},"children":[{"type":"element","tagName":"span","properties":{"style":"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"},"children":[{"type":"element","tagName":"span","properties":{"className":["pstrut"],"style":"height:2.7em;"},"children":[]},{"type":"element","tagName":"span","properties":{"className":["sizing","reset-size6","size3","mtight"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mord","mathdefault","mtight"]},"children":[{"type":"text","value":"s"}]}]}]}]},{"type":"element","tagName":"span","properties":{"className":["vlist-s"]},"children":[{"type":"text","value":"​"}]}]},{"type":"element","tagName":"span","properties":{"className":["vlist-r"]},"children":[{"type":"element","tagName":"span","properties":{"className":["vlist"],"style":"height:0.15em;"},"children":[{"type":"element","tagName":"span","properties":{},"children":[]}]}]}]}]}]}]}]}]},{"type":"text","value":" for a reading.\nThe last bit of proprietary fun came from the information display and error codes.\nThese were bit masks that were represented in ASCII as hexadecimal bit-masks.\nI copied the common ones from a python project which was a great help in the creation of this application."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"Implementation Specifics"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"The project utilizes the Elixir programming language because of its immediate familiarity and its failure handling mechanisms.\nThe actor model that erlang provides to supervise processes is ideal for handling connection issues and retry logic.\nWith all the built-in features of erlang, reconnecting devices came for free because of the supervision strategies for processes!\nThe serial connection was handled under a supervised process so if disconnects or unhandled errors occur, the supervisor keeps retrying to restore the task to a stable state.\nUsers can use the device in the way they need to at the time they need to.\nIt doesn’t matter if the device is turned off, unplugged, or can’t communicate with the OS.\nThe supervisor keeps retrying and spins up new processes errors are encountered, repeatedly attempting to stabilize."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"The "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"Nerves UART"}]},{"type":"text","value":" library is used to handle serial connections.\nConnecting to the "},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"RAD8"}]},{"type":"text","value":" was simple since the only concern was finding the proper serial device to communicate with.\nUsing a heuristic that worked on both MacOS and Ubuntu, which was grabbing the last result in the list of serial devices achieved the goal.\nIf there are issues connecting to the RAD8, it will certainly be from this convenient hack.\nIts purpose, automated connection handling upon reconnects since the serial device name can change.\nUsing the web framework "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"phoenix"}]},{"type":"text","value":" was really straight forward and easy to utilize.\nI wanted an excuse to use "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"liveview"}]},{"type":"text","value":" in order to see how things worked to do server side rendering for the first time and that was its own adventure.\nAll of the logic designed into the web application is built around "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"phoenix liveview"}]},{"type":"text","value":" and the charts and graphs were built using "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"contex"}]},{"type":"text","value":" which generates an "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"svg"}]},{"type":"text","value":"."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Testing and development was a pain at first.\nIt required having the physical device connected.\nBuilding a fake data input system that randomly generates data was the best way to rapidly increase productively while still being able to use the "},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"RAD8"}]},{"type":"text","value":".\nThe data storage mechanism was initially intended to be provided by the application directly via "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"Mnesia"}]},{"type":"text","value":" which is an erlang backed database of sorts.\nFor the sake of speed, I had to forgo this choice and require that users setup a "},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"Postgresql"}]},{"type":"text","value":" database instead.\nNot requiring a RDBMS would have been awesome for simplicity but ultimately, anyone using this application is going to need to be savvy enough to install a RDBMS anyways."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"Retrospective on Technological Choices"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Using Elixir was a good fit for the project overall.\nIt was reliable and has good integration with libraries that can talk with embedded hardware.\nUsing phoenix as the web framework was fine and honestly, probably any web framework would have been sufficient.\nI was able to use "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"phoenix liveview"}]},{"type":"text","value":" and dig my teeth into it for the first time.\nI’m not a "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"javascript"}]},{"type":"text","value":" developer and I prefer doing things on the backend so I’ve put off learning JS for a long time.\nBy using "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"liveview"}]},{"type":"text","value":" I have been able to put off learning JS longer but honestly, I had to learn a lot more about a framework then I would have liked.\nIt wasn’t particularly clear what I was doing at times and there’s a lot of magic involved in variable naming and configuring things to work well with "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"liveview"}]},{"type":"text","value":".\nI think overall it was faster to setup than running the frontend in JS but I don’t know if I’ll ever do that again."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"To me, "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"liveview"}]},{"type":"text","value":" seems to shine for server side control of visual updates and information.\nThis project was perfect because all I wanted to do was display and update information with minimal interaction.\nIf this were a project that needed a lot more frontend involvement, I would definitely choose JS over "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"liveview"}]},{"type":"text","value":" simply because JS is the domain of the frontend.\nNo matter how much backend engineers want to complain about it and avoid it, JS is a very capable language in the environment it was intended to run in.\nI say this with love for both sides, the "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"phoenix liveview"}]},{"type":"text","value":" project is pretty incredible that backend developers have the ability to make more frontend things possible that are smooth and dynamic.\nAt the same time, is it really worth the effort of learning another framework with more limited use cases where an escape hatch into JS is needed for complex UI interactions?\nMaybe, but after this project, if I need to do frontend work again it will most likely be in raw JS.\nOverall, if I were to create a serious project that I intended to support long term, I’d be sticking with JS.\nThe case for "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"liveview"}]},{"type":"text","value":" for me personally shines where the backend needs to control the frontend.\nThat said, the simplicity of having "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"liveview"}]},{"type":"text","value":" for the management of this project was awesome.\nThe entire stack is in "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"Elixir"}]},{"type":"text","value":" except for the generated JS that’s run and served by "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"phoneix"}]},{"type":"text","value":" itself.\nIt’s pretty easy to make an IP address publicly exposed so asking a doctor to go to a particular link so they can get some updates or run some queries live is pretty trivial."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"Final Thoughts"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"If you’re interested in the project, it’s "},{"type":"element","tagName":"a","properties":{"href":"https://github.com/k-cross/pulse_oximeter"},"children":[{"type":"text","value":"here"}]},{"type":"text","value":".\nIt was built for my son to make his health care better and my family’s lives easier.\nI never got to fully appreciate all the features and work I put into it, but I tried to make something simple and useful for technically inclined kindred spirits alike.\nThese features were requested by others and I genuinely hope that they keep helping people in need."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"I don’t think people shouldn need to have additional equipment and gear in order to get data from these devices, they need to be made with both doctors and patients in mind.\nIf I was harsh on the doctors in this article about this device, please know it was just about the recommended device and not an insult to their capability.\nWe had an incredible team of doctors that were all wonderful to interact with.\nThey were kind and caring and often went beyond the scope of their duties to make sure our son’s needs were met.\nAll the hatred in this article is directed at medical institutions that treat patients as a cost of business instead of humans that need care."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"This is probably as far as I’ll go with the project, but I’ll probably end up experimenting with some other strategies as a learning exercise which may enhance its reliability.\nUnfortunately, due to the technical limitations of the project requiring users to buy a serial cable and setting up the RAD8, putting additional effort into the ease of use with software setup wouldn’t enable any additional non-technical users.\nIn short, it’s as easy as it’s going to get but I wish it was accessible to a wider audience of patients and caregivers.\nThanks for visiting!"}]}],"data":{"quirksMode":false}},"fields":{"layout":"post","slug":"/posts/spo2/"}}}]}},"pageContext":{}},"staticQueryHashes":[]}